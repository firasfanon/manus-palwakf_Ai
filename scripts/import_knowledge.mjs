import { drizzle } from "drizzle-orm/mysql2";
import mysql from "mysql2/promise";
import * as schema from "../drizzle/schema.js";

// ูุฑุงุกุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
const DATABASE_URL = process.env.DATABASE_URL;

if (!DATABASE_URL) {
  console.error("โ DATABASE_URL is not defined");
  process.exit(1);
}

// ุฅูุดุงุก ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const connection = await mysql.createConnection(DATABASE_URL);
const db = drizzle(connection, { schema, mode: "default" });

/**
 * ุฏุงูุฉ ูุฅุถุงูุฉ ูุฑุฌุน ูุงุญุฏ ุฅูู ูุงุนุฏุฉ ุงููุนุฑูุฉ
 */
async function addKnowledgeDocument(document) {
  try {
    const [result] = await db.insert(schema.knowledgeDocuments).values({
      title: document.title,
      content: document.content,
      category: document.category,
      source: document.source,
      tags: document.tags || "",
      relevanceKeywords: document.relevanceKeywords || "",
      documentDate: document.documentDate ? new Date(document.documentDate) : null,
      createdAt: new Date(),
    });
    
    console.log(`โ ุชู ุฅุถุงูุฉ: ${document.title}`);
    return result;
  } catch (error) {
    console.error(`โ ุฎุทุฃ ูู ุฅุถุงูุฉ ${document.title}:`, error.message);
    throw error;
  }
}

/**
 * ุฏุงูุฉ ูุฅุถุงูุฉ ูุฌููุนุฉ ูุฑุงุฌุน
 */
async function importDocuments(documents) {
  console.log(`\n๐ ุจุฏุก ุฅุฏุฎุงู ${documents.length} ูุฑุฌุน...\n`);
  
  let successCount = 0;
  let errorCount = 0;
  
  for (const doc of documents) {
    try {
      await addKnowledgeDocument(doc);
      successCount++;
    } catch (error) {
      errorCount++;
    }
  }
  
  console.log(`\nโ ูุฌุญ: ${successCount}`);
  console.log(`โ ูุดู: ${errorCount}`);
  console.log(`๐ ุงูุฅุฌูุงูู: ${documents.length}\n`);
}

// ==============================================
// ุงููุฑุงุฌุน ุงูุฃุณุงุณูุฉ - ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู
// ==============================================

const ottomanLandLaw = [
  {
    title: "ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู - ุงููุงุฏุฉ 1: ุชุนุฑูู ุงูุฃุฑุงุถู",
    content: `ุงููุงุฏุฉ ุงูุฃููู: ุงูุฃุฑุงุถู ุนูู ุฎูุณุฉ ุฃูุณุงู:
    
1. ุงูุฃุฑุงุถู ุงููููููุฉ (ุงูููู): ููู ุงูุฃุฑุงุถู ุงูุชู ูููููุง ุงูุฃูุฑุงุฏ ููููุฉ ุชุงูุฉ ุจููุฌุจ ุณูุฏ ุฑุณููุ ููุญู ููู ุงูุชุตุฑู ูููุง ุจุงูุจูุน ูุงูุดุฑุงุก ูุงููุจุฉ ูุงูููู ูุงูุฅุฑุซ ุฏูู ููุฏ ุฃู ุดุฑุท.

2. ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉ: ููู ุงูุฃุฑุงุถู ุงูุชู ุชุนูุฏ ุฑูุจุชูุง ููุฏููุฉุ ููููู ููุฃูุฑุงุฏ ุญู ุงูุชุตุฑู ูููุง ููุท. ูุง ูุฌูุฒ ุจูุน ุฑูุจุฉ ุงูุฃุฑุถ ุงูุฃููุฑูุฉุ ูุฅููุง ูุจุงุน ุญู ุงูุชุตุฑู ููุท.

3. ุงูุฃุฑุงุถู ุงููููููุฉ: ููู ุงูุฃุฑุงุถู ุงูุชู ููููุง ุฃุตุญุงุจูุง ูุฌูุฉ ุฎูุฑูุฉ ุฃู ุฐุฑูุฉุ ููุง ูุฌูุฒ ุจูุนูุง ุฃู ุงูุชุตุฑู ูููุง ุฅูุง ููู ุดุฑูุท ุงููุงูู.

4. ุงูุฃุฑุงุถู ุงููุชุฑููุฉ: ููู ุงูุฃุฑุงุถู ุงููุฎุตุตุฉ ูููููุนุฉ ุงูุนุงูุฉ ูุงูุทุฑู ูุงูุณุงุญุงุช ูุงููุฑุงุนูุ ููุง ูุฌูุฒ ุชููููุง ุฃู ุงูุชุตุฑู ูููุง.

5. ุงูุฃุฑุงุถู ุงูููุงุช: ููู ุงูุฃุฑุงุถู ุงูุจูุฑ ุงูุชู ูู ุชูุนููุฑ ููู ุชูุฒุฑุนุ ููุฌูุฒ ุฅุญูุงุคูุง ุจุฅุฐู ูู ุงูุฏููุฉ.`,
    category: "ูุงูููู",
    source: "ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู 1858",
    tags: "ุฃุฑุงุถูุ ููููุฉุ ุฃููุฑูุฉุ ูููุ ูุชุฑููุฉุ ููุงุช",
    relevanceKeywords: "ุชุตููู ุงูุฃุฑุงุถูุ ุฃููุงุน ุงูุฃุฑุงุถูุ ููููุฉ ุงูุฃุฑุถ",
    documentDate: "1858-01-01"
  },
  {
    title: "ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู - ุงููุงุฏุฉ 3: ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉ",
    content: `ุงููุงุฏุฉ ุงูุซุงูุซุฉ: ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉ ูู ุงูุฃุฑุงุถู ุงูุชู ุฑูุจุชูุง ููุฏููุฉุ ูููุฃูุฑุงุฏ ุญู ุงูุชุตุฑู ูููุง ููุท.

ุดุฑูุท ุงูุชุตุฑู ูู ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉ:
1. ูุฌุจ ุฏูุน ุงูุถุฑุงุฆุจ ุงูููุฑุฑุฉ (ุงูููุฑู) ุณูููุงู ููุฏููุฉ
2. ูุฌุจ ุฒุฑุงุนุฉ ุงูุฃุฑุถ ูุนุฏู ุชุฑููุง ุจูุฑุงู ููุฏุฉ ุชุฒูุฏ ุนู ุซูุงุซ ุณููุงุช
3. ูุง ูุฌูุฒ ุจูุน ุฑูุจุฉ ุงูุฃุฑุถุ ูุฅููุง ูุจุงุน ุญู ุงูุชุตุฑู ููุท
4. ูุฌูุฒ ุชูุฑูุซ ุญู ุงูุชุตุฑู ูููุฑุซุฉ ุงูุดุฑุนููู
5. ูุฌูุฒ ููู ุญู ุงูุชุตุฑู ุจุฅุฐู ูู ุงูุฏููุฉ

ุนููุจุฉ ุชุฑู ุงูุฃุฑุถ ุจูุฑุงู:
ุฅุฐุง ุชุฑู ุตุงุญุจ ุญู ุงูุชุตุฑู ุงูุฃุฑุถ ุจูุฑุงู ููุฏุฉ ุซูุงุซ ุณููุงุช ูุชุชุงููุฉ ุฏูู ุนุฐุฑ ุดุฑุนูุ ูุณูุท ุญูู ูู ุงูุชุตุฑูุ ูุชุนูุฏ ุงูุฃุฑุถ ููุฏููุฉ ูุชููุญูุง ููู ูุนูุฑูุง.`,
    category: "ูุงูููู",
    source: "ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู 1858",
    tags: "ุฃุฑุงุถู ุฃููุฑูุฉุ ุญู ุงูุชุตุฑูุ ููุฑูุ ุถุฑุงุฆุจ",
    relevanceKeywords: "ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉุ ุญู ุงูุชุตุฑูุ ุดุฑูุท ุงูุชุตุฑู",
    documentDate: "1858-01-01"
  },
  {
    title: "ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู - ุงููุงุฏุฉ 12: ููู ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉ",
    content: `ุงููุงุฏุฉ ุงูุซุงููุฉ ุนุดุฑุฉ: ูุฌูุฒ ููู ุญู ุงูุชุตุฑู ูู ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉ ุจุฅุฐู ูู ุงูุณูุทุงู ุฃู ูู ูููุจ ุนูู.

ุดุฑูุท ููู ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉ:
1. ุงูุญุตูู ุนูู ุฅุฐู ุฑุณูู ูู ุงูุฏููุฉ (ุงูุฅุฑุงุฏุฉ ุงูุณููุฉ)
2. ุชุณุฌูู ุงูููู ูู ุงูุณุฌูุงุช ุงูุฑุณููุฉ
3. ุชุญุฏูุฏ ุฌูุฉ ุงูููู (ุฎูุฑู ุฃู ุฐุฑู)
4. ุชุนููู ูุงุธุฑ ููููู
5. ุงุณุชูุฑุงุฑ ุฏูุน ุงูุถุฑุงุฆุจ ุงูููุฑุฑุฉ (ุงูููุฑู) ูู ุฑูุน ุงูููู

ุฃุญูุงู ุฎุงุตุฉ:
- ุฅุฐุง ูู ููุฏูุน ุงูููุฑู ูู ุฑูุน ุงููููุ ูุญู ููุฏููุฉ ุงููุทุงูุจุฉ ุจู ูู ูุงุธุฑ ุงูููู
- ูุง ูุฌูุฒ ุจูุน ุงูุฃุฑุถ ุงููููููุฉ ุฅูุง ูู ุญุงูุงุช ุงูุงุณุชุจุฏุงู ุงูุดุฑุนู
- ูุฌูุฒ ุชุฃุฌูุฑ ุงูุฃุฑุถ ุงููููููุฉ ุจุนูุฏ ุฅุฌุงุฑุฉ ุทูููุฉ (ุญูุฑ)`,
    category: "ูุงูููู",
    source: "ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู 1858",
    tags: "ูููุ ุฃุฑุงุถู ุฃููุฑูุฉุ ุฅุฑุงุฏุฉ ุณููุฉุ ูุงุธุฑ ููู",
    relevanceKeywords: "ููู ุงูุฃุฑุงุถู ุงูุฃููุฑูุฉุ ุดุฑูุท ุงููููุ ุงูุฅุฑุงุฏุฉ ุงูุณููุฉ",
    documentDate: "1858-01-01"
  }
];

// ==============================================
// ูุฌูุฉ ุงูุฃุญูุงู ุงูุนุฏููุฉ - ุงูููู
// ==============================================

const mejelleWaqf = [
  {
    title: "ูุฌูุฉ ุงูุฃุญูุงู ุงูุนุฏููุฉ - ุงููุงุฏุฉ 1: ุชุนุฑูู ุงูููู",
    content: `ุงููุงุฏุฉ ุงูุฃููู: ุงูููู ูู ุญุจุณ ุงูุนูู ุนู ุชูููููุง ูุฃุญุฏ ูู ุงูุนุจุงุฏุ ูุงูุชุตุฏู ุจุงููููุนุฉ ุนูู ุงูููุฑุงุก ุฃู ุนูู ูุฌู ูู ูุฌูู ุงูุฎูุฑ.

ุดุฑุญ ุงูุชุนุฑูู:
- ุญุจุณ ุงูุนูู: ููุน ุจูุนูุง ุฃู ูุจุชูุง ุฃู ุชูุฑูุซูุง
- ุนู ุชูููููุง: ูุง ุชุตุจุญ ูููุงู ูุฃุญุฏ ุจุนุฏ ุงูููู
- ุงูุชุตุฏู ุจุงููููุนุฉ: ุงูุงูุชูุงุน ุจุฑูุน ุงูููู ูููู ููุฌูุฉ ุงูููููู ุนูููุง

ุฃุฑูุงู ุงูููู:
1. ุงููุงูู: ูู ูููู ุจุงูููู
2. ุงูููููู: ุงูุนูู ุงูุชู ูุชู ููููุง
3. ุงูููููู ุนููู: ุงูุฌูุฉ ุงููุณุชููุฏุฉ ูู ุงูููู
4. ุงูุตูุบุฉ: ููุธ ุงูููู ุงูุตุฑูุญ

ุดุฑูุท ุงููุงูู:
- ุฃู ูููู ุจุงูุบุงู ุนุงููุงู
- ุฃู ูููู ูุงููุงู ููุนูู ุงููููููุฉ
- ุฃู ูููู ูุฎุชุงุฑุงู ุบูุฑ ููุฑู`,
    category: "ูููู",
    source: "ูุฌูุฉ ุงูุฃุญูุงู ุงูุนุฏููุฉ - ูุชุงุจ ุงูููู",
    tags: "ูููุ ุชุนุฑููุ ุฃุฑูุงูุ ุดุฑูุท",
    relevanceKeywords: "ุชุนุฑูู ุงููููุ ุฃุฑูุงู ุงููููุ ุดุฑูุท ุงููุงูู",
    documentDate: "1876-01-01"
  },
  {
    title: "ูุฌูุฉ ุงูุฃุญูุงู ุงูุนุฏููุฉ - ุงููุงุฏุฉ 5: ุดุฑูุท ุตุญุฉ ุงูููู",
    content: `ุงููุงุฏุฉ ุงูุฎุงูุณุฉ: ูุดุชุฑุท ูุตุญุฉ ุงูููู:

1. ุฃู ูููู ุงูููููู ูุงูุงู ูุชูููุงู: ุฃู ูู ูููุฉ ูุงููุฉ ุดุฑุนุงู
2. ุฃู ูููู ูุนูููุงู: ูุญุฏุฏุงู ุจุงููุตู ุฃู ุงููุดุงูุฏุฉ
3. ุฃู ูููู ูููููุงู ูููุงูู: ููููุฉ ุชุงูุฉ ุตุญูุญุฉ
4. ุฃู ูููู ูุงุจูุงู ููุงูุชูุงุน ูุน ุจูุงุก ุนููู: ูุงูุนูุงุฑ ูุงูุฃุซุงุซ
5. ุฃู ูููู ุงูููู ูุคุจุฏุงู: ูุง ูุฌูุฒ ุชูููุชู ุจูุฏุฉ ูุนููุฉ
6. ุฃู ุชููู ุงูุฌูุฉ ุงูููููู ุนูููุง ูุนูููุฉ: ูุญุฏุฏุฉ ุจูุถูุญ
7. ุฃู ุชููู ุงูุฌูุฉ ุงูููููู ุนูููุง ุฌูุฉ ุจุฑ: ูุง ุชููู ูุนุตูุฉ

ุงูุฃููุงู ุงูุชู ูุง ูุตุญ ููููุง:
- ุงููููููุงุช ุงูุชู ุชุณุชููู ุจุงูุงุณุชุนูุงู (ูุงูุทุนุงู)
- ุงูุฃููุงู ุงููุบุตูุจุฉ ุฃู ุงููุณุฑููุฉ
- ุงูุฃููุงู ุงููุฌูููุฉ ุฃู ุบูุฑ ุงููุญุฏุฏุฉ`,
    category: "ูููู",
    source: "ูุฌูุฉ ุงูุฃุญูุงู ุงูุนุฏููุฉ - ูุชุงุจ ุงูููู",
    tags: "ุดุฑูุท ุงููููุ ุตุญุฉ ุงููููุ ุฃุญูุงู",
    relevanceKeywords: "ุดุฑูุท ุตุญุฉ ุงููููุ ุงููููููุ ุงูุฌูุฉ ุงูููููู ุนูููุง",
    documentDate: "1876-01-01"
  }
];

// ==============================================
// ูุงููู ุงูุฃููุงู ุงูุฃุฑุฏูู
// ==============================================

const jordanianWaqfLaw = [
  {
    title: "ูุงููู ุงูุฃููุงู ุงูุฃุฑุฏูู ุฑูู 23 ูุณูุฉ 1964 - ุงููุงุฏุฉ 1",
    content: `ุงููุงุฏุฉ 1: ุชุนุงุฑูู

ูู ูุฐุง ุงููุงูููุ ูููู ูููููุงุช ูุงูุนุจุงุฑุงุช ุงูุชุงููุฉ ุงููุนุงูู ุงููุฎุตุตุฉ ููุง ุฃุฏูุงู ูุง ูู ุชุฏู ุงููุฑููุฉ ุนูู ุฎูุงู ุฐูู:

ุงููุฒุงุฑุฉ: ูุฒุงุฑุฉ ุงูุฃููุงู ูุงูุดุคูู ูุงูููุฏุณุงุช ุงูุฅุณูุงููุฉ
ุงููุฒูุฑ: ูุฒูุฑ ุงูุฃููุงู ูุงูุดุคูู ูุงูููุฏุณุงุช ุงูุฅุณูุงููุฉ
ุงูููู: ุญุจุณ ุงูุนูู ุนู ุชูููููุง ูุฃุญุฏ ูู ุงูุนุจุงุฏ ูุงูุชุตุฏู ุจุงููููุนุฉ ุนูู ุงูููุฑุงุก ุฃู ุนูู ูุฌู ูู ูุฌูู ุงูุฎูุฑ
ุงูููู ุงูุฎูุฑู: ูุง ููู ุนูู ุฌูุฉ ุจุฑ ุนุงูุฉ ูุงูููุฑุงุก ูุงููุณุงุฌุฏ ูุงููุฏุงุฑุณ
ุงูููู ุงูุฐุฑู: ูุง ููู ุนูู ุงูุฐุฑูุฉ ูุงูุฃููุงุฏ
ุงููุงุธุฑ: ูู ูุชููู ุฅุฏุงุฑุฉ ุงูููู ูุงูุฅุดุฑุงู ุนููู
ุงููุชููู: ูู ูุชููู ุฅุฏุงุฑุฉ ุงูููู ุงูุฐุฑู
ุงูุฑูุน: ุงูุฏุฎู ุงููุงุชุฌ ุนู ุงูููู`,
    category: "ูุงูููู",
    source: "ูุงููู ุงูุฃููุงู ุงูุฃุฑุฏูู ุฑูู 23 ูุณูุฉ 1964",
    tags: "ูุงููู ุฃุฑุฏููุ ุชุนุงุฑููุ ููู ุฎูุฑูุ ููู ุฐุฑู",
    relevanceKeywords: "ูุงููู ุงูุฃููุงู ุงูุฃุฑุฏููุ ุชุนุงุฑููุ ุฃููุงุน ุงูููู",
    documentDate: "1964-01-01"
  },
  {
    title: "ูุงููู ุงูุฃููุงู ุงูุฃุฑุฏูู - ุงููุงุฏุฉ 10: ุฅุฏุงุฑุฉ ุงูุฃููุงู",
    content: `ุงููุงุฏุฉ 10: ุชุชููู ูุฒุงุฑุฉ ุงูุฃููุงู ุฅุฏุงุฑุฉ ุงูุฃููุงู ุงูุฎูุฑูุฉ ูุงูุฅุดุฑุงู ุนูู ุงูุฃููุงู ุงูุฐุฑูุฉ.

ุตูุงุญูุงุช ุงููุฒุงุฑุฉ:
1. ุฅุฏุงุฑุฉ ุงูุฃููุงู ุงูุฎูุฑูุฉ ูุงุณุชุซูุงุฑูุง
2. ุชุนููู ุงููุธุงุฑ ูุงููุชูููู
3. ุงูุฅุดุฑุงู ุนูู ุตุฑู ุฑูุน ุงูุฃููุงู
4. ุตูุงูุฉ ุงูุฃููุงู ูุนูุงุฑุชูุง
5. ุงุณุชุจุฏุงู ุงูุฃููุงู ุนูุฏ ุงูุถุฑูุฑุฉ
6. ุฑูุน ุงูุฏุนุงูู ุงููุถุงุฆูุฉ ุงููุชุนููุฉ ุจุงูุฃููุงู
7. ูุจูู ุงูุฃููุงู ุงูุฌุฏูุฏุฉ

ูุงุฌุจุงุช ุงููุงุธุฑ:
- ุงููุญุงูุธุฉ ุนูู ุงูููู ูุนูุงุฑุชู
- ุงุณุชุซูุงุฑ ุงูููู ุจุงูุทุฑู ุงูุดุฑุนูุฉ
- ุตุฑู ุงูุฑูุน ุนูู ุงูุฌูุงุช ุงููุณุชุญูุฉ
- ุชูุฏูู ุญุณุงุจ ุณููู ูููุฒุงุฑุฉ
- ุนุฏู ุงูุชุตุฑู ูู ุงูููู ุฅูุง ุจุฅุฐู ูู ุงููุฒุงุฑุฉ`,
    category: "ูุงูููู",
    source: "ูุงููู ุงูุฃููุงู ุงูุฃุฑุฏูู ุฑูู 23 ูุณูุฉ 1964",
    tags: "ุฅุฏุงุฑุฉ ุฃููุงูุ ูุงุธุฑุ ูุฒุงุฑุฉ ุฃููุงู",
    relevanceKeywords: "ุฅุฏุงุฑุฉ ุงูุฃููุงูุ ุตูุงุญูุงุช ุงููุฒุงุฑุฉุ ูุงุฌุจุงุช ุงููุงุธุฑ",
    documentDate: "1964-01-01"
  }
];

// ==============================================
// ุชูููุฐ ุงูุฅุฏุฎุงู
// ==============================================

async function main() {
  try {
    console.log("๐ ุจุฏุก ุนูููุฉ ุฅุฏุฎุงู ุงููุฑุงุฌุน ุงูุฃุณุงุณูุฉ...\n");
    
    // ุฅุฏุฎุงู ูุงููู ุงูุฃุฑุงุถู ุงูุนุซูุงูู
    await importDocuments(ottomanLandLaw);
    
    // ุฅุฏุฎุงู ูุฌูุฉ ุงูุฃุญูุงู ุงูุนุฏููุฉ
    await importDocuments(mejelleWaqf);
    
    // ุฅุฏุฎุงู ูุงููู ุงูุฃููุงู ุงูุฃุฑุฏูู
    await importDocuments(jordanianWaqfLaw);
    
    console.log("โ ุงูุชููุช ุนูููุฉ ุงูุฅุฏุฎุงู ุจูุฌุงุญ!\n");
    
  } catch (error) {
    console.error("โ ุฎุทุฃ ูู ุนูููุฉ ุงูุฅุฏุฎุงู:", error);
  } finally {
    await connection.end();
  }
}

// ุชุดุบูู ุงูุณูุฑูุจุช
main();
